<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý sản phẩm</title>
</head>
<body>
    <h1>Danh sách sản phẩm</h1>
    <input type="text" id="searchInput" placeholder="Tìm kiếm theo tên sản phẩm" />
    <button id="searchButton"><i class="fas fa-search"></i> Tìm kiếm</button>

    <table id="productTable">
        <thead>
            <tr>
                <th>Tên sản phẩm</th>
                <th>Giá sản phẩm</th>
                <th>Loại sản Phẩm!</th>
            </tr>
        </thead>
        <tbody>
            <!-- Dữ liệu sản phẩm sẽ được thêm vào đây bằng Ajax -->
        </tbody>
    </table>

    <script>
        $(document).ready(function () {
            // Gọi action GetProducts khi trang được tải
            $.ajax({
                url: "/Product/GetProducts",
                type: "GET",
                success: function (response) {
                    // Hiển thị danh sách sản phẩm trong bảng
                    var tbody = $("#productTable tbody");
                    $.each(response, function (index, product) {
                        var row = "<tr><td>" + product.Name + "</td><td>" + product.Price + "</td></tr>";
                        tbody.append(row);
                    });
                },
                error: function () {
                    alert("Lỗi kết nối đến máy chủ.");
                }
            });

            // Tìm kiếm sản phẩm
            $("#searchButton").click(function () {
                var keyword = $("#searchInput").val();
                $.ajax({
                    url: "/Products/GetProducts",
                    type: "GET",
                    data: { keyword: keyword }, // Gửi tham số tìm kiếm
                    success: function (response) {
                        // Hiển thị danh sách sản phẩm sau khi tìm kiếm
                        var tbody = $("#productTable tbody");
                        tbody.empty(); // Xóa dữ liệu cũ
                        $.each(response, function (index, product) {
                            var row = "<tr><td>" + product.Name + "</td><td>" + product.Price + "</td></tr>";
                            tbody.append(row);
                        });
                    },
                    error: function () {
                        alert("Lỗi kết nối đến máy chủ.");
                    }
                });
            });
        });
    </script>
</body>
</html>
